<!DOCTYPE html>
<html>
<head>
  <title>Labrador: 关于语音朗读</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="../../../application.css">
</head>

<body class="projects messages">
  <header>
    <nav class="global">
      <a href="../../../index.html" class="home">Home</a> |
      <a href="../../../projects/index.html" class="projects">Projects</a> |
      <a href="../../../calendars/index.html" class="calendars">Calendars</a> |
      <a href="../../../people/index.html" class="people">People</a>
    </nav>

    <header>
      <h1>Labrador</h1>
    </header>

      <nav><a href="../topics/index.html">&larr; See all discussions</a></nav>
  </header>

  
<article class="message">
  <header>
    <h2>关于语音朗读</h1>
    <p>Posted by 鹏 孙 on June  9, 2012</p>
  </header>

  <div class="content">
    <div>使用张总的web service完成了第一版的网页朗读效果，具体的结果我已经上传了，各位可以在studies/sample_assembler/out/中浏览体验。<br>
</div><div><br></div><div>但是，目前在网页的浏览中，我只支持了对以下四个部分的语音支持：</div><div>    1.无障碍浏览链接</div><div>    2.新闻的标题</div><div>    3.新闻的作者</div><div>    4.新闻的发布时间</div><div>对于新闻的正题内容，还没有办法做处理。原因是，没有明确的区分正文的界限。</div><div><br></div><div>我考量过大家网络制作的那个网站，他们的策略是，按照“，”分割，一逗一断，然后保持连读，就是一直读到结尾。另外还有一种可能是，根据p来分段，但是有的p非常大，所以生成语音的时间可能很长。各位觉得如何实现比较好？</div><div><br></div><div>另外就是声音的出发，目前是鼠标移动过，就会有触发（但是，同一时间只能由一断语音在播放，如果有别的语音在播放，那么就不会播放新的语音了）。在这个问题上，我考虑是否应该增加一个“停顿时间”的检测，只有停顿超过一断时间，才进行触发，这样可能减少误操作率。但是问题是，多长时间进行触发呢？各位有什么意见么？</div><div><br></div><div>最后就是，以上这亮点，在周一的demo中应该解决到什么程度呢？</div><div><br></div><div>求意见，求交流。</div>
  </div>

  
    <div class="comments">
    <h3>Comments</h3>

      <div class="comment">
        <p><b>鹏 孙</b> on June  9, 2012:</p>

        <div class="content">
          对了，由于生成的语音是m4a的，经测试，只能在Safari下运行。FF会提示不能加载资源类型。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June  9, 2012:</p>

        <div class="content">
          先回复两点：<br><br>1. 语音功能能发声就行，证明我们的技术设计和框架行得通就够了。<br><br>2. 断句如果以逗号为单位，优点是有更多重复的半句话，节省服务器资源，缺点是整句话更有利TTS优化语调。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June  9, 2012:</p>

        <div class="content">
          PS: 如果整体成型，不用再留在studies了，尽快建立master。<br><br>先回复两点：
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June  9, 2012:</p>

        <div class="content">
          原型只支持Safari没有问题。我生成m4a就是为只支持Safari考虑的。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June  9, 2012:</p>

        <div class="content">
          断句和触发声音在原型中可以忽略。考虑到网页的所有代码是我们自己后台生成的，这部分设计的自由度还是挺大的。比如assembler可以有多个版本，断句和插入可以完全在后台进行，生成专用的语音辅助版网页；另外，前端断句，做hash用ajax请求，动态插入也可以。
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June  9, 2012:</p>

        <div class="content">
          这样的话，整体的流程就跑通了，之后可能跟海龙师兄那边最后确认一下演示的接口，周一可以建立master。这样的话，整个流程（包括语音阅读）就都跑通了！
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June  9, 2012:</p>

        <div class="content">
          对，断句这个有很多备选方案，我倒是更倾向于ajax后台提前生成。这个在原型演示过后可以进行具体的设计。
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June  9, 2012:</p>

        <div class="content">
          其实使用html5的audio标签，最大的好处是，他帮助咱们完成了流媒体播放以及音量缓冲，所以，单个语音文件的大小，在客户端来看意义不是很重大。所以，可以尝试整段生成。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June  9, 2012:</p>

        <div class="content">
          在工具栏没看到播放按钮。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June  9, 2012:</p>

        <div class="content">
          还有翻译功能，如果不麻烦，直接把reciteme的先移植过来吧。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June  9, 2012:</p>

        <div class="content">
          我想语音部分最基本最直观的功能是全文朗读。目前读标题就行了。
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June  9, 2012:</p>

        <div class="content">
          <div>工具栏暂时没有朗读按钮，默认朗读是打开的，鼠标移动到文字上方就可以朗读了。</div><div>翻译功能的话，可以使用google translate的api来进行。但是具体的翻译效果不敢保证。</div><div>这样吧，明天我在工具栏上增加朗读开关以及翻译按钮。</div>
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June  9, 2012:</p>

        <div class="content">
          先不用担心翻译质量。增加翻译功能证明我们有能力使用第三方API增强用户代理的辅助功能。这就够了。
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June  9, 2012:</p>

        <div class="content">
          没有问题！
        </div>

        
      </div>
      <div class="comment">
        <p><b>cliff woo</b> on June  9, 2012:</p>

        <div class="content">
          关于将study中的内容转入master的问题。现在原型所采用的技术方案，还需进一步评估，是否考虑在原型后对目前的技术方案做一下确认，之后再将代码转到master。
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 10, 2012:</p>

        <div class="content">
          张总，我没有在reciteme里面找到翻译的入口啊，我看到了他们说他们可以解决翻译问题，可是具体的操作入口在何处呢？没有发现啊。。。
        </div>

        
      </div>
      <div class="comment">
        <p><b>cliff woo</b> on June 10, 2012:</p>

        <div class="content">
          看看 google translate的api
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 10, 2012:</p>

        <div class="content">
          嗯嗯，目前使用这个做翻译方式~~
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 10, 2012:</p>

        <div class="content">
          Demo SpeakMe -&gt; 上方Toggle Plain Text -&gt; Language
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 10, 2012:</p>

        <div class="content">
          <div>藏得好深。。。<br><br>
</div><div>PS：语音朗读开关已经添加，可以体验了！</div>
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 10, 2012:</p>

        <div class="content">
          在使用google translate api的时候遇到了一点问题，这个服务是付费服务，需要注册账号才可以使用。这个该如何处理呢？
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 10, 2012:</p>

        <div class="content">
          原来免费服务几个月前关掉了。我手头没有境外的信用卡。Google Checkout又不支持中国。先试试微软的：<br><a data-behavior="truncate" href="http://www.netmagazine.com/tutorials/switching-google-translate-microsoft-translator" target="_blank">http://www.netmagazine.com/tutorials/switching-google-translate-microsoft-translator</a>
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 10, 2012:</p>

        <div class="content">
          没错，现在的技术方案中很多还是临时性的，有些代码可能需要替换。可以先评估再转入，但也可以考虑先转入master再fork/merge。<br><br>考虑到原型如果能工作，就证明技术框架没问题。下一步就是通过快速迭代把原型变成alpha版。开发alpha版的过程中就可以内测了，需要保持一个working的master。<br><br>可能陈总看了原型就觉得可以卖钱了，呵呵。<br><br>吴老师是不是考虑演示过后建议海龙把后端用脚本语言改写，然后再集成一次？
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 10, 2012:</p>

        <div class="content">
          孙鹏，我刚开通了Google API。（假冒了一把香港人）<br><span><span><span><p><br></p>
<p><b>AIzaSyDaSjttIQryVZn8sqUkVmx227SsiWiYzC8</b></p>
</span>
</span>
<span>
<span>
<p><br></p>
<p>我把关于这个key的信息放在一个新文档里了。如果还需要什么其他的Google服务，请通知我。</p></span></span></span>
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 10, 2012:</p>

        <div class="content">
          好的,我下午把整体的翻译功能加上.<br><br>不过我的html+css+js功力有限,我先使用简单的方式把翻译之后的内容呈现在页面上吧.
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 10, 2012:</p>

        <div class="content">
          功力有限？下次最好用一个你没接触过的技术。多好的实战学习机会啊。不如Demo后你和海龙调换角色，各自锻炼一下，呵呵。
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 10, 2012:</p>

        <div class="content">
          其实这些技术对我来说已经算是全新的技术了，也是最近才刚刚开始研究的，正好有这样一个机会，感觉非常不错！
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 10, 2012:</p>

        <div class="content">
          完成了对Gogole Translate的整合，代码非常简单，由于对界面如何表现还没有特别明确的考虑，所以先使用alert弹出一个对话框来显示翻译的结果。这个也只能在Safari下使用（暂时没有考虑浏览器兼容问题）。各位看看有什么问题吧！
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 10, 2012:</p>

        <div class="content">
          好！ 锁定features，准备明天的演示。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 10, 2012:</p>

        <div class="content">
          弹出对话窗口有延迟，有点混乱。我看看代码，能不能微调一下。
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 10, 2012:</p>

        <div class="content">
          如果不使用窗口的话，会比较好办。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 11, 2012:</p>

        <div class="content">
          如果向doTranslate函数传递一个html里面的函数名作为callback呢？html和js两个文件就解耦了。
        </div>

        
      </div>
      <div class="comment">
        <p><b>鹏 孙</b> on June 12, 2012:</p>

        <div class="content">
          今天分析了一下工具栏要做的功能，感觉可以按照模块进行划分，所以就重构了一下代码。在重构的时候，添加了callback，完成了翻译的解耦，具体代码已经push了。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 12, 2012:</p>

        <div class="content">
          好。我马上pull!
        </div>

        
      </div>
  </div>

</article>

</body>

</html>
