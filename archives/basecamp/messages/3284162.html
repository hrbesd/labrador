<!DOCTYPE html>
<html>
<head>
  <title>Labrador: TTS运行结果分析</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="../../../application.css">
</head>

<body class="projects messages">
  <header>
    <nav class="global">
      <a href="../../../index.html" class="home">Home</a> |
      <a href="../../../projects/index.html" class="projects">Projects</a> |
      <a href="../../../calendars/index.html" class="calendars">Calendars</a> |
      <a href="../../../people/index.html" class="people">People</a>
    </nav>

    <header>
      <h1>Labrador</h1>
    </header>

      <nav><a href="../topics/index.html">&larr; See all discussions</a></nav>
  </header>

  
<article class="message">
  <header>
    <h2>TTS运行结果分析</h1>
    <p>Posted by 鹏 孙 on July 17, 2012</p>
  </header>

  <div class="content">
    <div>昨天晚上运行了一下程序，早上起床发现程序崩溃了，错误信息是500，服务器内部错误，发生错误的调用是根据jobID来获取最终声音文件URL路径的方法，请张工协助调查一下是什么原因呢？</div><div><br></div><div>说一下各方面数据吧：</div><div>1.断句次数</div><div>到奔溃的时候程序处理完了1269个页面，正在处理第1270个页面，第1269个页面处理结束之后，共调用了TTS服务38910次，平均一个页面请求TTS服务30次。</div><div>2.断句请求时间</div><div>我记录了每次断句从发送请求到接收到jobID的时间（因为现在TTS服务还没有更新，所以我还是得利用jobID再次请求来获得最终的URL，这里没计算第二次请求的时间延时），可以看到结果大多稳定在0.08s左右，也就是能满足100ms内完成响应。附件中tts_logger.log显示了具体的处理某个文件的时间</div><div>3.程序运行时间分析</div><div>附加了profiler统计得到的结果，其中比较感兴趣的是sendJobRequest方法的时间，用grep命令得到结果如下：</div><div>38977    1.981    0.000 3518.857    0.090 tts_client.py:17(sendJobRequest)</div><div>第一个数据是总的调用次数，说明调用了38977次方法，另外一个有价值的数据是3518.857，这个数据表名从进入这个方法到退出这个方法一共停留多长时间（包括子调用），可以看到平均每次调用时间差不多在0.1s左右，也就是也满足单次请求小于100ms的要求。</div>
  </div>

    <ul class="attachments">
      <li>
          <a href="../attachments/9021199-profile_result.log">profile_result.log</a>
      </li>
      <li>
          <a href="../attachments/9021200-tts_logger.log">tts_logger.log</a>
      </li>
  </ul>

  
</article>

</body>

</html>
