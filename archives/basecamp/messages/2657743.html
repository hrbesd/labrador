<!DOCTYPE html>
<html>
<head>
  <title>Labrador: 帮忙看看这个网页的规则</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="../../../application.css">
</head>

<body class="projects messages">
  <header>
    <nav class="global">
      <a href="../../../index.html" class="home">Home</a> |
      <a href="../../../projects/index.html" class="projects">Projects</a> |
      <a href="../../../calendars/index.html" class="calendars">Calendars</a> |
      <a href="../../../people/index.html" class="people">People</a>
    </nav>

    <header>
      <h1>Labrador</h1>
    </header>

      <nav><a href="../topics/index.html">&larr; See all discussions</a></nav>
  </header>

  
<article class="message">
  <header>
    <h2>帮忙看看这个网页的规则</h1>
    <p>Posted by hailong geng on June 15, 2012</p>
  </header>

  <div class="content">
    <a href="http://www.harbin.gov.cn/zwxxgk/zfgg/zfgg2012/4.htm">http://www.harbin.gov.cn/zwxxgk/zfgg/zfgg2012/4.htm</a><br>明明网页有50条连接
 <span>&lt;a class="f3348"开头的<br>但为什么就显示25条，看的眼睛都快花了，感觉没什么区别啊</span>
  </div>

  
    <div class="comments">
    <h3>Comments</h3>

      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 15, 2012:</p>

        <div class="content">
          你已经知道网页中<a>的class属性是重复的吧？</a>
        </div>

        
      </div>
      <div class="comment">
        <p><b>hailong geng</b> on June 15, 2012:</p>

        <div class="content">
          我知道class可以重复，但是为什么本来网页只显示25项却往源代码里塞50项啊，开始还以为spider实现有错误，让我好一顿debug
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 16, 2012:</p>

        <div class="content">
          <pre>grep 'display:none' 4.htm | wc -l</pre><br><br>这个网页里面隐藏着不少有趣的东西，可能网站方还不知道。
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 16, 2012:</p>

        <div class="content">
          有做了个试验：<br><ol>
<li>分别wget那个栏目的5个网页</li>
<li>分别用下面这个命令抓所有链接文本:</li>
</ol><pre>grep 'class="f3348"' 1.htm | sed 's/&lt;[^&gt;]*&gt;//g' &gt; 1.txt

tail -n 25 2.txt</pre><pre>head -n 25 1.txt

内容是一样的。也就是半页是和上一页重复，半页是和下一页重复.</pre><pre> 
对于这个栏目，你只抓奇数页码就够了，呵呵。</pre>
        </div>

        
      </div>
      <div class="comment">
        <p><b>hailong geng</b> on June 16, 2012:</p>

        <div class="content">
          我暂时用set过滤掉了所有重复节点，效率还不错
        </div>

        
      </div>
      <div class="comment">
        <p><b>hailong geng</b> on June 16, 2012:</p>

        <div class="content">
          我主要是不明白为什么有些显示有些不显示，感觉他们的标签和结构都是一样的，难道有些超出了显示区域？
        </div>

        
      </div>
      <div class="comment">
        <p><b>HONGFENG ZHANG</b> on June 16, 2012:</p>

        <div class="content">
          可能是前端维护者对待后台bug的一个办法。
        </div>

        
      </div>
  </div>

</article>

</body>

</html>
