# 版本发布

## 三个更新通道

- Stable
- Unstable
- Dev

## 用法

### 修改配置文件

#### 步骤

在 `releases` 目录下复制一个已有的配置文件夹：
 
1. 设置
	- 编辑 `*.conf`，设置一个临时目录。
2. 建目录
	- 编辑 `*.dirs`，使用 `$TMP_DIR` 作为根目录
3. 关联要复制的文件
	- 编辑 `*.butts`，使用 `ln` 命令关联。
4. 给复制的可执行文件建立链接
	- 编辑`*.links`，在 `bin` 目录下给关键的可执行文件建立链接。

### 运行脚本

语法:

```
$ ./publish.sh <name-of-release>
```

## 版本服务器的目录布局

### 约定

- 用户名是 `updater`
- 产品根目录是 `~/labrador`

## 如何实现

先在本地建立好目录结构，然后把要复制的 `butts` 文件用符号链接，使用 `rsync` 把符号链接当作文件复制。然后在 `bin` 目录里给 `butts` 里的文件建立符号链接，把符号链接按照符号链接复制。